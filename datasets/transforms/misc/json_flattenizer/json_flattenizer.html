<html>
<head>
  <link href="read_files.css" rel="stylesheet" type="text/css">
  <link href="download.css" rel="stylesheet" type="text/css">
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
  <script src="read_files.js"></script>
  <script src="flatJson.js"></script>
  <script src="JSONUtils.js"></script>
  <script src="flatter.js"></script>
  
</head>
<body>
  <input type="file" id="files" name="file"/>
  <button onclick="abortRead();">Cancel read</button>
  <div id="progress_bar">
    <div class="percent">0%</div>
  </div>

  <div id="original"></div>
  <div id="out"></div>
  
  <!--<details>
    <summary>What is this?</summary>
    <div>
      <p>A demo of the HTML5 <code>download</code> attribute.
      When used on an anchor, this attribute signifies that the resource it points to should be downloaded
      by the browser rather than navigating to it.</p>
      <p>'Create file' creates a .txt file from the <code>contenteditable</code> region's content. This is done
      by using <code>window.URL.createObjectURL()</code>. That generated file can be named and saved to
      the user's machine by setting the  <code>download</code> attribute on a link.</p>
      <p><b>Browser support</b>: right now, only Chrome dev channel (14.0.835.15+) supports this attribute.</p>
    </div>
  </details>-->

  
  <section>
    <div id="container">
      <div id="contenteditable" contenteditable cols=30>My epic novel that I don't want to lose.</div>
      <input type="text" value="MyFile.txt" placeholder="filename.txt">
      <button onclick="downloadFile()">Create file</button> <output></output>
      <aside id="download-help"> 
	<ul>
	  <li>This link was created using a <code>blob:</code> URL
	  ( <a href="http://www.html5rocks.com/en/tutorials/workers/basics/#toc-inlineworkers-bloburis" target="_blank">huh?</a> ).
	  It contains the <code>download</code> attribute, which means clicking it will
	  force the browser to download the resource rather than navigating to it.</li>
	  <li>In Chrome, you can also drag this link out of the browser tab and the file
	  will be saved. ( <a href="http://www.thecssninja.com/javascript/gmail-dragout" target="_blank">huh?</a> )</li>
	</ul>
      </aside> 
    </div>
  </section>

  <script src="download.js"></script>
  
  <script type="text/javascript">
    //document.getElementById('fileinput').addEventListener('change', readSingleFile, false);
//     readXml("totale_mancante03_e_visitabili.xml");

    document.getElementById('files').addEventListener('change', handleFileSelect, false);
  </script>
  
</body>
</html>